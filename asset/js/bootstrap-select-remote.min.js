jQuery(function(e){e.fn.ajaxSelect=function(){var t,r=e(this);if(r.length){if(r.length>1)return void r.each(function(){e(this).ajaxSelect()});var n=r.data(),s=n.selectpicker,i={9:"tab",16:"shift",17:"ctrl",18:"alt",27:"esc",37:"left",39:"right",38:"up",40:"down",91:"meta",229:"unknown"},l=e('<li class="status"></li>'),c=function(e){l.parent().length&&l.remove(),l.html(e).show(),s.$menuInner.append(l)};n.minLength=n.minLength||1,n.requestDelay=n.requestDelay||300,e("option",r).hide(),r.selectpicker("refresh"),c("Type to begin search"),s.$searchbox.on("keyup",function(l){var h=s.$searchbox.val();if(!i[l.keyCode])return clearTimeout(t),h.length?h.length<n.minLength?(r.html("").selectpicker("refresh"),void c("Enter at least "+n.minLength+" letters")):void(t=setTimeout(function(){c('Searching for "'+h+'"'),e.ajax({type:"GET",url:n.ajaxUrl,data:{q:h},success:function(t){if(!e.isArray(t)||!t.length)return r.html("").selectpicker("refresh"),void c('No results matched "'+h+'"');var n=e("<select/>");e.each(t,function(t,r){var s=e("<option/>");s.val(r.value).text(r.text),r["class"]&&s.attr("class",r["class"]),r.disabled&&s.attr("disabled",!0);for(a in r.data)r.data.hasOwnProperty(a)&&s.attr("data-"+a,r.data[a]);s.appendTo(n)}),r.html(n.html()).selectpicker("refresh")}})},n.requestDelay)):(r.html("").selectpicker("refresh"),void c("Type to begin search"))})}}});